<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>即時字幕 & 翻譯 (Local)</title>
  <link rel="stylesheet" href="./style.css" />

</head>
<body>
  <div class="wrap">
    <div class="title">
      <div class="glow"></div>
      <h1>即時字幕（中文）→ 英 / 日</h1>
      <span id="status" class="pill">idle</span>
    </div>

    <div class="grid">
      <!-- 左：控制卡 -->
      <section class="card">
        <div class="row">
          <div class="mic" aria-hidden="true"></div>
          <div>
            <div class="small">使用前先解鎖；開始後允許麥克風</div>
            <div class="small">token 會過期，卡住時請停止→再解鎖→開始</div>
          </div>
        </div>

        <div class="row">
          <label>訪客密碼</label>
          <input id="pass" type="password" placeholder="輸入密碼" value="pass-dev-123" />
          <button id="btnAuth" class="btn">解鎖</button>
          <span id="gate" class="pill">locked</span>
        </div>

        <div class="row">
          <label>來源語言</label>
          <select id="src">
            <option value="zh-TW" selected>中文（台灣） zh-TW</option>
            <option value="en-US">English (US) en-US</option>
            <option value="ja-JP">日本語 ja-JP</option>
          </select>
        </div>

        <div class="row mb-2">
          <label>目標語言</label>
          <label class="small"><input type="checkbox" class="tgt" value="en" checked/> 英文 (en)</label>
          <label class="small"><input type="checkbox" class="tgt" value="ja" checked/> 日文 (ja)</label>
        </div>
        

        <!-- <div class="row" style="align-items:flex-start">
          <label>專有名詞提示</label>
          <input id="phrases" style="flex:1" placeholder="例：阿貿, 52Hz, Azure, FastAPI, Vue"/>
        </div> -->

        <div class="row">
          <button id="btnStart" class="btn" disabled>開始</button>
          <button id="btnStop" class="btn-ghost" disabled>停止</button>
        </div>
      </section>

      <!-- 右：字幕卡 -->
      <section class="card">
        <div id="partial" class="">等待語音中<span class="blink">…</span></div>
        <div id="final"></div>
      </section>
    </div>
  </div>

  <!-- Azure Speech SDK（只載這一份） -->
  <script src="https://aka.ms/csspeech/jsbrowserpackageraw"></script>
  <!-- 你的 App 腳本 -->
  <script defer src="./azure-speach.js"></script>
</body>
</html>
